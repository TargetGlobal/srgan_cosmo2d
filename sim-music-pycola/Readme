Manual generation of one universe end-to-end
Source code:
https://github.com/philbull/pycola3/blob/main/pycola3/ic.py

ssh cori 
salloc --nodes 1 --qos interactive --time 01:00:00 -C haswell  --image=balewski/ubu20-music-pycola3:v1   --ntasks-per-node=3
export HDF5_USE_FILE_LOCKING=FALSE
 env|grep  SHIFTER_RUNTIME  # is-in-shifter
 
a) the cosmological params for Music & PyCola are defined in
univ_base7.ics.conf

b) setup software

 export ENGINE=" shifter --image=balewski/ubu20-music-pycola3:v1 "
 export MUSIC=/usr/share/music/build/MUSIC
 mkdir out
 

c) run Music
 cd out; cp ../univ_base*.ics.conf .
 time $ENGINE $MUSIC ../univ_base3.ics.conf
 cd ..

c.1) project DM vector filed to density
  ./projectNBody.py --simConf univ_base3 --extName music --level 7 --inpPath out3 

c.2) plot DM density cube
   ./plotCube.py --dataName univers3.music --dataPath out3 

d) run PyCola  (used 16 CPUs, ~no RAM)
   time $ENGINE ./pycola3_main.py  --dataPath out --simConf univ_base0 --level 6
   
d.1) project DM vector filed to density
 ./projectNBody.py --simConf univ_base3 --inpPath out3  --extName pycola --level 7

d.2) plot DM density cube
   ./plotCube.py --dataName univers3.pycola7  --dataPath out3 



